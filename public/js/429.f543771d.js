"use strict";(self["webpackChunkpoderjudicial"]=self["webpackChunkpoderjudicial"]||[]).push([[429],{9007:(e,a,n)=>{n.d(a,{LP:()=>i,nJ:()=>o,GJ:()=>u,IU:()=>d,xJ:()=>c,uf:()=>p});var t=n(5474),l=n(1959);n(6395);let r=(0,l.iH)(null);(0,l.iH)(!1);function i(){return o()?null:r.value.access_token}function s(){return r.value.userdata}function o(){return!r.value}function u(){return!o()&&(1===s().admin||!0===s().admin)}async function d(e,a,n){try{await t.api.post("auth/signup",{name:e,email:a,password:n});return!0}catch(l){return l.response&&401===l.response.status?"Error":"Internal error."}}async function c(e,a){console.log("iniciando sesi칩n... plop",e,a);try{let n=await t.api.post("auth/login",{email:e,password:a});r.value=n.data}catch(n){return n.response&&401===n.response.status?"Invalid credentials":"Internal error."}}async function p(){if(!o())try{await t.api.get("auth/logout",{headers:{Authorization:"Bearer "+i()}})}catch(e){}return r=(0,l.iH)(null),!0}},9429:(e,a,n)=>{n.r(a),n.d(a,{default:()=>y});var t=n(3673);const l={class:"q-pa-md",style:{"min-width":"500px"}},r={class:"q-gutter-md",style:{"max-width":"500px"}};function i(e,a,n,i,s,o){const u=(0,t.up)("q-input"),d=(0,t.up)("q-btn");return(0,t.wg)(),(0,t.iD)("div",l,[(0,t._)("div",r,[(0,t.Wm)(u,{type:"name",outlined:"",modelValue:e.name,"onUpdate:modelValue":a[0]||(a[0]=a=>e.name=a),label:"Nombre",placeholder:"Pedro Perez"},null,8,["modelValue"]),(0,t.Wm)(u,{type:"email",outlined:"",modelValue:e.email,"onUpdate:modelValue":a[1]||(a[1]=a=>e.email=a),label:"Correo electr칩nico",placeholder:"email@example.com"},null,8,["modelValue"]),(0,t.Wm)(u,{type:"password",outlined:"",modelValue:e.password,"onUpdate:modelValue":a[2]||(a[2]=a=>e.password=a),label:"Contrase침a",password:"abc123"},null,8,["modelValue"]),(0,t._)("div",null,[(0,t.Wm)(d,{color:"primary",label:"registrarse",class:"full-width",onClick:a[3]||(a[3]=a=>e.doSignup()),disable:!e.canSend()},null,8,["disable"])])])])}var s=n(1959),o=n(9007),u=n(6417),d=n(6249);const c=(0,t.aZ)({name:"Signup",setup(){return{name:(0,s.iH)(""),email:(0,s.iH)(""),password:(0,s.iH)(""),async doSignup(){try{return await(0,o.IU)(this.name,this.email,this.password),u.Z.create({color:"positive",message:"Cuenta creada exitosamente, inicie sesi칩n."}),d.Z.hide(),this.$router.push({name:"login"})}catch(e){u.Z.create({color:"negative",message:"La cuenta ya existe."})}d.Z.hide()},canSend(){return this.name.length>0&&this.email.length>0&&this.password.length>0&&/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(this.email)}}},mounted(){if((0,o.LP)())return isAdmin()?this.$router.push({name:"admin"}):this.$router.push({name:"user"})}});var p=n(4260),m=n(7216),h=n(6114),w=n(7518),g=n.n(w);const f=(0,p.Z)(c,[["render",i]]),y=f;g()(c,"components",{QInput:m.Z,QBtn:h.Z})}}]);