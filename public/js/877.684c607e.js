"use strict";(self["webpackChunkpoderjudicial"]=self["webpackChunkpoderjudicial"]||[]).push([[877],{9007:(e,a,n)=>{n.d(a,{LP:()=>s,nJ:()=>l,GJ:()=>u,IU:()=>d,xJ:()=>c,uf:()=>m});var t=n(5474),r=n(1959);n(6395);let i=(0,r.iH)(null);(0,r.iH)(!1);function s(){return l()?null:i.value.access_token}function o(){return i.value.userdata}function l(){return!i.value}function u(){return!l()&&(1===o().admin||!0===o().admin)}async function d(e,a,n){try{await t.api.post("auth/signup",{name:e,email:a,password:n});return!0}catch(r){return r.response&&401===r.response.status?"Error":"Internal error."}}async function c(e,a){console.log("iniciando sesión... plop",e,a);try{let n=await t.api.post("auth/login",{email:e,password:a});i.value=n.data}catch(n){return n.response&&401===n.response.status?"Invalid credentials":"Internal error."}}async function m(){if(!l())try{await t.api.get("auth/logout",{headers:{Authorization:"Bearer "+s()}})}catch(e){}return i=(0,r.iH)(null),!0}},877:(e,a,n)=>{n.r(a),n.d(a,{default:()=>v});var t=n(3673);const r={class:"q-pa-md",style:{"min-width":"500px"}},i={class:"q-gutter-md",style:{"max-width":"500px"}};function s(e,a,n,s,o,l){const u=(0,t.up)("q-input"),d=(0,t.up)("q-btn");return(0,t.wg)(),(0,t.iD)("div",r,[(0,t._)("div",i,[(0,t.Wm)(u,{type:"email",outlined:"",modelValue:e.email,"onUpdate:modelValue":a[0]||(a[0]=a=>e.email=a),label:"Correo electrónico",placeholder:"email@example.com"},null,8,["modelValue"]),(0,t.Wm)(u,{type:"password",outlined:"",modelValue:e.password,"onUpdate:modelValue":a[1]||(a[1]=a=>e.password=a),label:"Contraseña",password:"abc123"},null,8,["modelValue"]),(0,t._)("div",null,[(0,t.Wm)(d,{color:"primary",label:"iniciar sesión",class:"full-width",onClick:a[2]||(a[2]=a=>e.doLogin()),disable:!e.canSend()},null,8,["disable"])])])])}var o=n(1959),l=n(9007),u=n(6249),d=n(6417);const c=(0,t.aZ)({name:"LoginPage",setup(){return{email:(0,o.iH)("admin@email.com"),password:(0,o.iH)("admin"),remember:(0,o.iH)(!0),async doLogin(){u.Z.show();try{if(await(0,l.xJ)(this.email,this.password,this.remember),console.log((0,l.nJ)(),(0,l.GJ)()),!(0,l.nJ)())return u.Z.hide(),(0,l.GJ)()?this.$router.push({name:"admin"}):this.$router.push({name:"user"});d.Z.create({color:"negative",message:"Error interno."})}catch(e){d.Z.create({color:"negative",message:"Usuario inexistente o contraseña inválida."})}u.Z.hide()},canSend(){return this.email.length>0&&this.password.length>0&&/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(this.email)}}},mounted(){if((0,l.LP)())return(0,l.GJ)()?this.$router.push({name:"admin"}):this.$router.push({name:"user"})}});var m=n(4260),p=n(7216),h=n(6114),w=n(7518),g=n.n(w);const f=(0,m.Z)(c,[["render",s]]),v=f;g()(c,"components",{QInput:p.Z,QBtn:h.Z})}}]);